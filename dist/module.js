/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/data","@grafana/runtime","lodash"],(function(e,t,n,r,a){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=9)}([function(t,n){t.exports=e},function(e,t,n){e.exports=n(7)()},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):a===t}))}return!0}},function(e,t,n){"use strict";var r=n(8);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(3),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}var s=n(4),f=function(e){function t(t){var n=e.call(this,t)||this;return n.annotations={},n}return o(t,e),t.prototype.applyTemplateVariables=function(e,t){var n=Object(s.getTemplateSrv)();return i(i({},e),{spreadsheet:n.replace(e.spreadsheet,t),range:e.range?n.replace(e.range,t):""})},t.prototype.getSpreadSheets=function(){return l(this,void 0,Promise,(function(){return c(this,(function(e){return[2,this.getResource("spreadsheets").then((function(e){var t=e.spreadsheets;return t?Object.entries(t).map((function(e){var t=u(e,2),n=t[0];return{label:t[1],value:n}})):[]}))]}))}))},t}(s.DataSourceWithBackend),p=n(0),d=n.n(p),g=n(2);function m(e){var t=null==e?void 0:e.indexOf("/d/");if(!t)return{spreadsheet:e};var n=e.substring(t+3);return(t=n.indexOf("/"))&&(n=n.substring(0,t)),(t=e.indexOf("range="))>0?{spreadsheet:n,range:e.substring(t+"range=".length)}:{spreadsheet:n}}var h,v=function(e){return void 0===e&&(e=300),e<60?e+"s":e<3600?e/60+"m":e/3600+"h"},y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRangeChange=function(e){t.props.onChange(i(i({},t.props.query),{range:e.target.value}))},t.onSpreadsheetIDChange=function(e){var n=t.props,r=n.query,a=n.onRunQuery,o=n.onChange;if(e.value){var l=e.value;/(.*)\/spreadsheets\/d\/(.*)/.test(l)?o(i(i({},r),m(l))):o(i(i({},r),{spreadsheet:l})),a()}},t.toggleUseTimeFilter=function(e){var n=t.props,r=n.query,a=n.onChange,o=n.onRunQuery;a(i(i({},r),{useTimeFilter:!r.useTimeFilter})),o()},t}return o(t,e),t.prototype.componentDidMount=function(){this.props.query.hasOwnProperty("cacheDurationSeconds")||(this.props.query.cacheDurationSeconds=300)},t.prototype.render=function(){var e,t,n=this.props,r=n.query,a=n.onRunQuery,o=n.onChange,l=n.datasource;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"gf-form-inline"},d.a.createElement(g.InlineFormLabel,{width:10,className:"query-keyword",tooltip:d.a.createElement("p",null,"The ",d.a.createElement("code",null,"spreadsheetId")," is used to identify which spreadsheet is to be accessed or altered. This ID is the value between the &quot/d/&quot and the &quot/edit&quot in the URL of your spreadsheet.")},"Spreadsheet ID"),d.a.createElement(g.SegmentAsync,{loadOptions:function(){return l.getSpreadSheets()},placeholder:"Enter SpreadsheetID",value:r.spreadsheet,allowCustomValue:!0,onChange:this.onSpreadsheetIDChange}),r.spreadsheet&&d.a.createElement(g.LinkButton,{style:{marginTop:1},variant:"link",icon:"link",href:(e=r,t="https://docs.google.com/spreadsheets/d/"+e.spreadsheet+"/view",e.range&&(t+="#range="+e.range),t),target:"_blank"}),d.a.createElement("div",{className:"gf-form gf-form--grow"},d.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),d.a.createElement("div",{className:"gf-form-inline"},d.a.createElement(g.InlineFormLabel,{width:10,className:"query-keyword",tooltip:d.a.createElement("p",null,"A string like ",d.a.createElement("code",null,"Sheet1!A1:B2"),", that refers to a group of cells in the spreadsheet, and is typically used in formulas. Named ranges are also supported. When a named range conflicts with a sheet’s name, the named range is preferred.")},"Range"),d.a.createElement("input",{className:"gf-form-input width-14",value:r.range||"",placeholder:"ie: Class Data!A2:E",onChange:this.onRangeChange,onBlur:a}),d.a.createElement("div",{className:"gf-form gf-form--grow"},d.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),d.a.createElement("div",{className:"gf-form-inline"},d.a.createElement(g.InlineFormLabel,{width:10,className:"query-keyword",tooltip:"Time in seconds that the spreadsheet will be cached in Grafana after receiving a response from the spreadsheet API"},"Cache Time"),d.a.createElement(g.Segment,{value:{label:v(r.cacheDurationSeconds),value:r.cacheDurationSeconds},options:[0,5,10,30,60,120,300,600,1800,3600,7200,18e3].map((function(e){return{label:v(e),value:e,description:e?"":"Response is not cached at all"}})),onChange:function(e){var t=e.value;return o(i(i({},r),{cacheDurationSeconds:t}))}}),d.a.createElement("div",{className:"gf-form gf-form--grow"},d.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),d.a.createElement("div",{className:"gf-form-inline"},d.a.createElement(g.LegacyForms.Switch,{label:"Use Time Filter",labelClass:"width-10  query-keyword",tooltip:"Apply the dashboard time range to the first time field",checked:!0===r.useTimeFilter,onChange:this.toggleUseTimeFilter}),d.a.createElement("div",{className:"gf-form gf-form--grow"},d.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))))},t}(p.PureComponent);!function(e){e.JWT="jwt",e.KEY="key"}(h||(h={}));var b=[{label:"API Key",value:h.KEY},{label:"Google JWT File",value:h.JWT}],E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onResetApiKey=function(){var e=t.props.options;t.props.onOptionsChange(i(i({},e),{secureJsonData:i(i({},e.secureJsonData),{apiKey:""}),secureJsonFields:i(i({},e.secureJsonFields),{apiKey:!1})}))},t}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.options,n=e.onOptionsChange,a=t.secureJsonFields,o=t.jsonData;o.hasOwnProperty("authType")||(o.authType=h.KEY);var l=t.secureJsonData;return d.a.createElement("div",{className:"gf-form-group"},d.a.createElement("div",{className:"gf-form"},d.a.createElement(g.InlineFormLabel,{className:"width-10"},"Auth"),d.a.createElement(g.Select,{className:"width-30",value:b.find((function(e){return e.value===o.authType}))||b[0],options:b,defaultValue:o.authType,onChange:Object(r.onUpdateDatasourceJsonDataOptionSelect)(this.props,"authType")})),o.authType===h.KEY&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"gf-form"},d.a.createElement(g.LegacyForms.SecretFormField,{isConfigured:a&&a.apiKey,value:(null==l?void 0:l.apiKey)||"",label:"API Key",labelWidth:10,inputWidth:30,placeholder:"Enter API Key",onReset:this.onResetApiKey,onChange:Object(r.onUpdateDatasourceSecureJsonDataOption)(this.props,"apiKey")}))),o.authType===h.JWT&&d.a.createElement(D,{isConfigured:a&&!!a.jwt,onChange:function(e){n(i(i({},t),{secureJsonData:i(i({},l),{jwt:e})}))}}),d.a.createElement("div",{className:"grafana-info-box",style:{marginTop:24}},o.authType===h.JWT?d.a.createElement(d.a.Fragment,null,d.a.createElement("h4",null,"Generate a JWT file"),d.a.createElement("ol",{style:{listStylePosition:"inside"}},d.a.createElement("li",null,"Open the ",d.a.createElement("a",{href:"https://console.developers.google.com/apis/credentials"},"Credentials")," page in the Google API Console."),d.a.createElement("li",null,"Click ",d.a.createElement("strong",null,"Create Credentials")," then click ",d.a.createElement("strong",null,"Service account"),"."),d.a.createElement("li",null,"On the Create service account page, enter the Service account details."),d.a.createElement("li",null,"On the ",d.a.createElement("code",null,"Create service account")," page, fill in the ",d.a.createElement("code",null,"Service account details")," and then click ",d.a.createElement("code",null,"Create")),d.a.createElement("li",null,"On the ",d.a.createElement("code",null,"Service account permissions")," page, don’t add a role to the service account. Just click ",d.a.createElement("code",null,"Continue")),d.a.createElement("li",null,"In the next step, click ",d.a.createElement("code",null,"Create Key"),". Choose key type ",d.a.createElement("code",null,"JSON")," and click"," ",d.a.createElement("code",null,"Create"),". A JSON key file will be created and downloaded to your computer"),d.a.createElement("li",null,"Open the"," ",d.a.createElement("a",{href:"https://console.cloud.google.com/apis/library/sheets.googleapis.com?q=sheet"},"Google Sheets")," ","in API Library and enable access for your account"),d.a.createElement("li",null,"Open the"," ",d.a.createElement("a",{href:"https://console.cloud.google.com/apis/library/drive.googleapis.com?q=drive"},"Google Drive")," ","in API Library and enable access for your account. Access to the Google Drive API is used to list all spreadsheets that you have access to."),d.a.createElement("li",null,"Drag the file to the dotted zone above. Then click ",d.a.createElement("code",null,"Save & Test"),". The file contents will be encrypted and saved in the Grafana database."))):d.a.createElement(d.a.Fragment,null,d.a.createElement("h4",null,"Generate an API key"),d.a.createElement("ol",{style:{listStylePosition:"inside"}},d.a.createElement("li",null,"Open the ",d.a.createElement("a",{href:"https://console.developers.google.com/apis/credentials"},"Credentials page")," in the Google API Console."),d.a.createElement("li",null,"Click ",d.a.createElement("strong",null,"Create Credentials")," and then click ",d.a.createElement("strong",null,"API key"),"."),d.a.createElement("li",null,"Copy the key and paste it in the API Key field above. The file contents are encrypted and saved in the Grafana database.")))))},t}(p.PureComponent),O=n(5),w=["type","project_id","private_key_id","private_key","client_email","client_id","auth_uri","token_uri","auth_provider_x509_cert_url","client_x509_cert_url"];function D(e){var t=e.onChange,n=e.isConfigured,r=u(Object(p.useState)(!n),2),a=r[0],o=r[1],i=u(Object(p.useState)(),2),l=i[0],c=i[1];return a?d.a.createElement(d.a.Fragment,null,d.a.createElement(he,{baseStyle:{marginTop:"24px"},accept:"application/json",onDrop:function(e){var n=new FileReader;1===e.length?(n.onloadend=function(e){!function(e){return Object(O.isObject)(e)&&w.every((function(t){return!!e[t]}))}(JSON.parse(e.target.result))?c("Invalid JWT file"):(t(e.target.result),o(!1))},n.readAsText(e[0])):e.length>1&&c("You can only upload one file")}},d.a.createElement("p",{style:{margin:0,fontSize:18}},"Drop the file here, or click to use the file explorer")),l&&d.a.createElement("pre",{style:{margin:"12px 0 0"},className:"gf-form-pre alert alert-error"},l)):d.a.createElement(d.a.Fragment,null,w.map((function(e){return d.a.createElement("div",{className:"gf-form",key:e},d.a.createElement(g.InlineFormLabel,{width:10},Object(O.startCase)(e)),d.a.createElement("input",{disabled:!0,className:"gf-form-input width-30",value:"configured"}))})),d.a.createElement(g.Button,{style:{marginTop:12},variant:"secondary",onClick:function(){return o(!0)}},"Upload another JWT file"))}var j=n(1),S=n.n(j);function C(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}function k(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}Object.create;function F(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}Object.create;var P=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function T(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=P.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var x=[".DS_Store","Thumbs.db"];function A(e){return C(this,void 0,void 0,(function(){return k(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?_(e.dataTransfer,e.type):I(e))];var n}))}))}function I(e){return(null!==e.target&&e.target.files?N(e.target.files):[]).map((function(e){return T(e)}))}function _(e,t){return C(this,void 0,void 0,(function(){var n;return k(this,(function(r){switch(r.label){case 0:return e.items?(n=N(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(L))]):[3,2];case 1:return[2,R(K(r.sent()))];case 2:return[2,R(N(e.files).map((function(e){return T(e)})))]}}))}))}function R(e){return e.filter((function(e){return-1===x.indexOf(e.name)}))}function N(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function L(e){if("function"!=typeof e.webkitGetAsEntry)return J(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?q(t):J(e)}function K(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e}(e,Array.isArray(t)?K(t):[t])}),[])}function J(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=T(t);return Promise.resolve(n)}function z(e){return C(this,void 0,void 0,(function(){return k(this,(function(t){return[2,e.isDirectory?q(e):W(e)]}))}))}function q(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function a(){var o=this;t.readEntries((function(t){return C(o,void 0,void 0,(function(){var o,i,l;return k(this,(function(c){switch(c.label){case 0:if(t.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=c.sent(),e(o),[3,4];case 3:return i=c.sent(),n(i),[3,4];case 4:return[3,6];case 5:l=Promise.all(t.map(z)),r.push(l),a(),c.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function W(e){return C(this,void 0,void 0,(function(){return k(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=T(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var G=n(6),B=n.n(G);function M(e,t){return"application/x-moz-file"===e.type||B()(e,t)}function U(e,t,n){if(Y(e.size)){if(Y(t)&&Y(n))return e.size>=t&&e.size<=n;if(Y(t))return e.size>=t;if(Y(n))return e.size<=n}return!0}function Y(e){return null!=e}function Q(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize;return!(!e.multiple&&t.length>1)&&t.every((function(e){return M(e,n)&&U(e,r,a)}))}function V(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function H(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function $(e){e.preventDefault()}function X(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function Z(e){return-1!==e.indexOf("Edge/")}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return X(e)||Z(e)}function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return!V(e)&&t&&t.apply(void 0,[e].concat(r)),V(e)}))}}function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ce=Object(p.forwardRef)((function(e,t){var n=e.children,r=se(le(e,["children"])),a=r.open,o=le(r,["open"]);return Object(p.useImperativeHandle)(t,(function(){return{open:a}}),[a]),d.a.createElement(p.Fragment,null,n(oe({},o,{open:a})))}));ce.displayName="Dropzone",ce.propTypes={children:S.a.func,accept:S.a.oneOfType([S.a.string,S.a.arrayOf(S.a.string)]),multiple:S.a.bool,preventDropOnDocument:S.a.bool,noClick:S.a.bool,noKeyboard:S.a.bool,noDrag:S.a.bool,noDragEventsBubbling:S.a.bool,minSize:S.a.number,maxSize:S.a.number,disabled:S.a.bool,getFilesFromEvent:S.a.func,onFileDialogCancel:S.a.func,onDragEnter:S.a.func,onDragLeave:S.a.func,onDragOver:S.a.func,onDrop:S.a.func,onDropAccepted:S.a.func,onDropRejected:S.a.func};var ue={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]};function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accept,n=e.disabled,r=void 0!==n&&n,a=e.getFilesFromEvent,o=void 0===a?A:a,i=e.maxSize,l=void 0===i?1/0:i,c=e.minSize,u=void 0===c?0:c,s=e.multiple,f=void 0===s||s,d=e.onDragEnter,g=e.onDragLeave,m=e.onDragOver,h=e.onDrop,v=e.onDropAccepted,y=e.onDropRejected,b=e.onFileDialogCancel,E=e.preventDropOnDocument,O=void 0===E||E,w=e.noClick,D=void 0!==w&&w,j=e.noKeyboard,S=void 0!==j&&j,C=e.noDrag,k=void 0!==C&&C,F=e.noDragEventsBubbling,P=void 0!==F&&F,T=Object(p.useRef)(null),x=Object(p.useRef)(null),I=Object(p.useReducer)(fe,ue),_=re(I,2),R=_[0],N=_[1],L=R.isFocused,K=R.isFileDialogActive,J=R.draggedFiles,z=Object(p.useCallback)((function(){x.current&&(N({type:"openDialog"}),x.current.value=null,x.current.click())}),[N]),q=function(){K&&setTimeout((function(){x.current&&(x.current.files.length||(N({type:"closeDialog"}),"function"==typeof b&&b()))}),300)};Object(p.useEffect)((function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}}),[x,K,b]);var W=Object(p.useCallback)((function(e){T.current&&T.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),z()))}),[T,x]),G=Object(p.useCallback)((function(){N({type:"focus"})}),[]),B=Object(p.useCallback)((function(){N({type:"blur"})}),[]),Y=Object(p.useCallback)((function(){D||(ee()?setTimeout(z,0):z())}),[x,D]),X=Object(p.useRef)([]),Z=function(e){T.current&&T.current.contains(e.target)||(e.preventDefault(),X.current=[])};Object(p.useEffect)((function(){return O&&(document.addEventListener("dragover",$,!1),document.addEventListener("drop",Z,!1)),function(){O&&(document.removeEventListener("dragover",$),document.removeEventListener("drop",Z))}}),[T,O]);var ae=Object(p.useCallback)((function(e){e.preventDefault(),e.persist(),he(e),-1===X.current.indexOf(e.target)&&(X.current=[].concat(ne(X.current),[e.target])),H(e)&&Promise.resolve(o(e)).then((function(t){V(e)&&!P||(N({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),d&&d(e))}))}),[o,d,P]),ce=Object(p.useCallback)((function(e){if(e.preventDefault(),e.persist(),he(e),e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return H(e)&&m&&m(e),!1}),[m,P]),se=Object(p.useCallback)((function(e){e.preventDefault(),e.persist(),he(e);var t=X.current.filter((function(t){return t!==e.target&&T.current&&T.current.contains(t)}));X.current=t,t.length>0||(N({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),H(e)&&g&&g(e))}),[T,g,P]),pe=Object(p.useCallback)((function(e){e.preventDefault(),e.persist(),he(e),X.current=[],H(e)&&Promise.resolve(o(e)).then((function(n){if(!V(e)||P){var r=[],a=[];n.forEach((function(e){M(e,t)&&U(e,u,l)?r.push(e):a.push(e)})),!f&&r.length>1&&a.push.apply(a,ne(r.splice(0))),N({acceptedFiles:r,rejectedFiles:a,type:"setFiles"}),h&&h(r,a,e),a.length>0&&y&&y(a,e),r.length>0&&v&&v(r,e)}})),N({type:"reset"})}),[f,t,u,l,o,h,v,y,P]),de=function(e){return r?null:e},ge=function(e){return S?null:de(e)},me=function(e){return k?null:de(e)},he=function(e){P&&e.stopPropagation()},ve=Object(p.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,a=e.onKeyDown,o=e.onFocus,i=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,s=e.onDragLeave,f=e.onDrop,p=le(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return oe(ie({onKeyDown:ge(te(a,W)),onFocus:ge(te(o,G)),onBlur:ge(te(i,B)),onClick:de(te(l,Y)),onDragEnter:me(te(c,ae)),onDragOver:me(te(u,ce)),onDragLeave:me(te(s,se)),onDrop:me(te(f,pe))},n,T),r||S?{}:{tabIndex:0},{},p)}}),[T,W,G,B,Y,ae,ce,se,pe,S,k,r]),ye=Object(p.useCallback)((function(e){e.stopPropagation()}),[]),be=Object(p.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,r=void 0===n?"ref":n,a=e.onChange,o=e.onClick,i=le(e,["refKey","onChange","onClick"]),l=ie({accept:t,multiple:f,type:"file",style:{display:"none"},onChange:de(te(a,pe)),onClick:de(te(o,ye)),autoComplete:"off",tabIndex:-1},r,x);return oe({},l,{},i)}}),[x,t,f,pe,r]),Ee=J.length,Oe=Ee>0&&Q({files:J,accept:t,minSize:u,maxSize:l,multiple:f}),we=Ee>0&&!Oe;return oe({},R,{isDragAccept:Oe,isDragReject:we,isFocused:L&&!r,getRootProps:ve,getInputProps:be,rootRef:T,inputRef:x,open:de(z)})}function fe(e,t){switch(t.type){case"focus":return oe({},e,{isFocused:!0});case"blur":return oe({},e,{isFocused:!1});case"openDialog":return oe({},e,{isFileDialogActive:!0});case"closeDialog":return oe({},e,{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive;return oe({},e,{draggedFiles:t.draggedFiles,isDragActive:n});case"setFiles":return oe({},e,{acceptedFiles:t.acceptedFiles,rejectedFiles:t.rejectedFiles});case"reset":return oe({},e,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]});default:return e}}var pe={display:"flex",justifyContent:"center",alignItems:"center",height:"150px",backgroundColor:"#212327",padding:24,borderWidth:2,borderRadius:2,borderColor:"#808080",borderStyle:"dashed",outline:"none",transition:"border .24s ease-in-out"},de={borderColor:"#2196f3"},ge={borderColor:"#EF843C"},me={borderColor:"#E24D42"};function he(e){var t=e.children,n=e.baseStyle,r=void 0===n?{}:n,a=e.activeStyle,o=void 0===a?{}:a,l=e.acceptStyle,c=void 0===l?{}:l,u=e.rejectStyle,s=void 0===u?{}:u,f=se(function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children","baseStyle","activeStyle","acceptStyle","rejectStyle"])),g=f.getRootProps,m=f.getInputProps,h=f.isDragActive,v=f.isDragAccept,y=f.isDragReject,b=Object(p.useMemo)((function(){return i(i(i(i(i({},pe),r),h?i(i({},de),o):{}),v?i(i({},ge),c):{}),y?i(i({},me),s):{})}),[h,v,y,o,c,s,r]);return d.a.createElement("div",i({},g({style:b})),d.a.createElement("input",i({},m())),t)}var ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={index:0},t.renderInfo=function(e){var t,n=null===(t=e.meta)||void 0===t?void 0:t.custom;return n?d.a.createElement("div",null,d.a.createElement("h3",null,"Info"),d.a.createElement("pre",null,JSON.stringify(n,null,2))):null},t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.data;return t&&t.length?d.a.createElement("div",null,d.a.createElement("h3",null,"Google Sheets Metadata"),t.map((function(t){return e.renderInfo(t)}))):d.a.createElement("div",null,"No Data")},t}(p.PureComponent);n.d(t,"plugin",(function(){return ye}));var ye=new r.DataSourcePlugin(f).setConfigEditor(E).setQueryEditor(y).setMetadataInspector(ve)}])}));
//# sourceMappingURL=module.js.map